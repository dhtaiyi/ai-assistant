<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenClaw Remote</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; color: white; }
        .container { max-width: 500px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 30px; }
        .card { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .card h3 { color: #667eea; margin-bottom: 15px; }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; color: #666; }
        .input-group input, .input-group select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 10px; font-size: 16px; cursor: pointer; margin-bottom: 10px; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; }
        .btn-secondary { background: #f5f5f5; color: #333; }
        .quick { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; }
        .quick button { padding: 10px 15px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; }
        .quick button:hover { background: #667eea; color: white; }
        .result { background: #1e1e1e; color: #00ff00; padding: 15px; border-radius: 10px; font-family: monospace; max-height: 200px; overflow-y: auto; white-space: pre-wrap; }
        .status { text-align: center; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .status.connected { background: rgba(102, 187, 106, 0.3); }
        .status.waiting { background: rgba(255, 193, 7, 0.3); }
        .url-display { background: #f5f5f5; padding: 10px; border-radius: 8px; font-family: monospace; font-size: 14px; word-break: break-all; margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– OpenClaw è¿œç¨‹æ§åˆ¶</h1>
        
        <div class="status connected" id="status">
            ğŸŸ¢ å·²è¿æ¥ - ç­‰å¾…å‘½ä»¤
        </div>
        
        <div class="card">
            <h3>ğŸ”— æ‰©å±•è¿æ¥çŠ¶æ€</h3>
            <p style="font-size: 14px; color: #666;">
                è¯·ç¡®ä¿Chromeæ‰©å±•å·²å®‰è£…å¹¶è¿è¡Œ<br>
                æ‰©å±•ä¼šè½®è¯¢æ­¤æœåŠ¡å™¨è·å–å‘½ä»¤
            </p>
        </div>
        
        <div class="card">
            <h3>ğŸ“¤ å‘é€å‘½ä»¤</h3>
            <div class="input-group">
                <label>å‘½ä»¤ç±»å‹</label>
                <select id="cmd-type">
                    <option value="navigate">å¯¼èˆª</option>
                    <option value="click">ç‚¹å‡»</option>
                    <option value="getStockData">è·å–è‚¡ç¥¨æ•°æ®</option>
                    <option value="getPageInfo">è·å–é¡µé¢ä¿¡æ¯</option>
                    <option value="evaluate">æ‰§è¡Œä»£ç </option>
                </select>
            </div>
            <div class="input-group">
                <label>å‚æ•°</label>
                <input type="text" id="cmd-param" placeholder="URLæˆ–é€‰æ‹©å™¨">
            </div>
            <button class="btn btn-primary" onclick="sendCommand()">å‘é€å‘½ä»¤</button>
        </div>
        
        <div class="card">
            <h3>âš¡ å¿«æ·æ“ä½œ</h3>
            <div class="quick">
                <button onclick="quickNavigate('https://www.10jqka.com.cn')">åŒèŠ±é¡º</button>
                <button onclick="quickNavigate('https://quote.eastmoney.com')">ä¸œæ–¹è´¢å¯Œ</button>
                <button onclick="quickNavigate('https://xueqiu.com')">é›ªçƒ</button>
                <button onclick="sendCommand('getStockData')">è‚¡ç¥¨æ•°æ®</button>
                <button onclick="sendCommand('getPageInfo')">é¡µé¢ä¿¡æ¯</button>
            </div>
        </div>
        
        <div class="card">
            <h3>ğŸ“¥ æ‰§è¡Œç»“æœ</h3>
            <button class="btn btn-secondary" onclick="checkResult()">ğŸ”„ åˆ·æ–°ç»“æœ</button>
            <div class="result" id="result">ç­‰å¾…æ‰§è¡Œ...</div>
        </div>
    </div>

    <script>
        let lastCommandId = null;
        let lastResultTime = 0;
        
        async function sendCommand(type, param) {
            const cmdType = type || document.getElementById('cmd-type').value;
            const paramValue = param || document.getElementById('cmd-param').value;
            
            const command = { type: cmdType };
            if (paramValue) {
                if (cmdType === 'navigate') command.url = paramValue;
                else command.selector = paramValue;
            }
            
            try {
                const response = await fetch('/command', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ command })
                });
                
                const data = await response.json();
                if (data.success) {
                    lastCommandId = data.id;
                    document.getElementById('result').textContent = 'å‘½ä»¤å·²å‘é€ï¼Œç­‰å¾…æ‰§è¡Œ...\n' + JSON.stringify(command, null, 2);
                } else {
                    document.getElementById('result').textContent = 'å‘é€å¤±è´¥: ' + data.error;
                }
            } catch (e) {
                document.getElementById('result').textContent = 'é”™è¯¯: ' + e.message;
            }
        }
        
        function quickNavigate(url) {
            document.getElementById('cmd-type').value = 'navigate';
            document.getElementById('cmd-param').value = url;
            sendCommand('navigate', url);
        }
        
        async function checkResult() {
            try {
                const response = await fetch('/result?id=' + (lastCommandId || ''));
                const data = await response.json();
                
                if (data.success && data.result) {
                    const time = data.time ? new Date(data.time).toLocaleTimeString() : '';
                    document.getElementById('result').textContent = `[${time}]\n` + JSON.stringify(data.result, null, 2);
                } else {
                    document.getElementById('result').textContent = 'æš‚æ— ç»“æœæˆ–å‘½ä»¤æ­£åœ¨æ‰§è¡Œ';
                }
            } catch (e) {
                document.getElementById('result').textContent = 'æ£€æŸ¥å¤±è´¥: ' + e.message;
            }
        }
        
        // å®šæ—¶æ£€æŸ¥ç»“æœ
        setInterval(checkResult, 2000);
    </script>
</body>
</html>

# 2026-02-20

## 股票数据采集研究

### 东方财富API (成功)
- 找到稳定可用的免费API: `https://push2.eastmoney.com/api/qt/stock/get`
- 成功获取: 贵州茅台、上证指数、平安银行等股票数据
- 价格需要除以100转换（API返回的是"分"为单位）

### 新浪API (备用)
- 备选方案: `http://hq.sinajs.cn/list=sh600519`
- 响应格式: `var hq_str_sh600519="贵州茅台,1486.600,1485.300,..."`
- 编码: GBK

### 同花顺 (未成功)
- 尝试访问: `https://stockpage.10jqka.com.cn/600519/`
- 页面存在但数据获取遇到反爬限制

---

## 创建的文件

### 股票采集工具
- `stock_simple.py` - 基础股票查询（个股+指数+批量）
- `stock_rank.py` - 排行查询（涨幅榜+跌幅榜+成交量榜）
- `stock_plate.py` - 板块排行（板块内个股涨幅）
- `stock.bat` / `stock_rank.bat` - Windows一键运行脚本

### 浏览器控制研究
- `browser-remote/` / `browser-extension-v3/` / `browser-control-v2/` - Chrome扩展方案
- `browser-controller/` - Playwright方案
- `webbrowser-app/` - PyQt5嵌入式浏览器
- `ths-crawler/` - 同花顺数据采集

---

## API字段说明

### 东方财富股票API
| 字段 | 说明 |
|------|------|
| f2 | 当前价 |
| f3 | 涨跌幅 |
| f43 | 收盘价 |
| f44 | 最高价 |
| f45 | 最低价 |
| f57 | 代码 |
| f58 | 名称 |

### 市场代码
- 上海: `secid=1.{code}`
- 深圳: `secid=0.{code}`

---

## 关键发现

1. **服务器端浏览器控制可行**: Playwright可以成功控制浏览器打开同花顺
2. **东方财富API最稳定**: 免费、稳定、无需认证
3. **Chrome扩展限制**: 扩展只能运行在用户本地，AI无法直接远程控制

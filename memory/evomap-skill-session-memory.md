# EvoMapæŠ€èƒ½ï¼šè·¨ä¼šè¯è®°å¿†è¿ç»­æ€§

**æ¥æº:** EvoMap Marketplace  
**Asset ID:** sha256:def136049c982ed785117dff00bb3238ed71d11cf77c019b3db2a2c0ef5a9f2b6  
**èŠ‚ç‚¹ID:** node_2d8ac76...  
**GDIåˆ†æ•°:** 69.15 | **ç½®ä¿¡åº¦:** 0.94  
**è·å–æ—¶é—´:** 2026-02-20

---

## è§¦å‘ä¿¡å·

- `session_amnesia` - ä¼šè¯å¤±å¿†
- `context_loss` - ä¸Šä¸‹æ–‡ä¸¢å¤±
- `cross_session_gap` - è·¨ä¼šè¯é—´éš”

---

## æ ¸å¿ƒç­–ç•¥

### è®°å¿†åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é•¿æœŸå­˜å‚¨ (Long-term)             â”‚
â”‚    memory/MEMORY.md (ç²¾é€‰è®°å¿†)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ¯æ—¥è®°å½• (Daily)                 â”‚
â”‚    memory/YYYY-MM-DD.md                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ»šåŠ¨äº‹ä»¶æµ (Rolling 24h)         â”‚
â”‚    memory/RECENT_EVENTS.md              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å·¥ä½œç¼“å†² (Working Buffer)        â”‚
â”‚    ä¼šè¯å†…çš„å®æ—¶ä¸Šä¸‹æ–‡                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å®ç°æ–¹æ¡ˆ

### 1. RECENT_EVENTS.md (æ»šåŠ¨äº‹ä»¶æµ)

åˆ›å»ºä¸€ä¸ª24å°æ—¶æ»šåŠ¨çš„äº‹ä»¶è®°å½•æ–‡ä»¶ï¼š

```markdown
# RECENT_EVENTS.md

**æœ€åæ›´æ–°:** 2026-02-20T08:00:00Z

## æ´»è·ƒä¼šè¯
- ä¼šè¯ID: session_abc123
- å¼€å§‹æ—¶é—´: 2026-02-20T07:30:00Z
- æœ€åæ´»åŠ¨: 2026-02-20T08:00:00Z

## å¾…åŠäº‹é¡¹
- [ ] å°çº¢ä¹¦è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] EvoMapç”³è¯‰è·Ÿè¿›

## è¿›è¡Œä¸­çš„ä»»åŠ¡
- å°çº¢ä¹¦ç¬”è®°å‘å¸ƒæµç¨‹ä¼˜åŒ–
  - çŠ¶æ€: å·²å®Œæˆcookiesè·å–
  - ä¸‹ä¸€æ­¥: æµ‹è¯•å‘å¸ƒåŠŸèƒ½

## é‡è¦ä¸Šä¸‹æ–‡
- ç”¨æˆ·åå¥½: ç®€æ´ç›´æ¥çš„æ²Ÿé€š
- å½“å‰é¡¹ç›®: Xiaohongshuè‡ªåŠ¨åŒ–

## æœ€è¿‘çš„å¯¹è¯æ‘˜è¦
- 15:00 - åŒæ­¥ä»£ç åˆ°GitHub
- 12:00 - å¤„ç†EvoMapç”³è¯‰
- 09:00 - æ’æŸ¥æµè§ˆå™¨æ§åˆ¶é—®é¢˜
```

### 2. è®°å¿†æ¢å¤æµç¨‹

å½“æ–°ä¼šè¯å¼€å§‹æ—¶ï¼š

```python
def restore_session_context():
    """æ¢å¤è·¨ä¼šè¯ä¸Šä¸‹æ–‡"""
    context = {}
    
    # 1. åŠ è½½é•¿æœŸè®°å¿†ï¼ˆç²¾é€‰ï¼‰
    context.update(load_long_term_memory())
    
    # 2. åŠ è½½æœ€è¿‘äº‹ä»¶ï¼ˆ24hæ»šåŠ¨ï¼‰
    context.update(load_recent_events())
    
    # 3. æ£€æŸ¥æ˜¯å¦æœ‰æœªå®Œæˆçš„ä»»åŠ¡
    context.update(check_pending_tasks())
    
    return context
```

### 3. è®°å¿†å›ºåŒ–æµç¨‹

ä¼šè¯ç»“æŸæ—¶ï¼š

```python
def consolidate_session():
    """å›ºåŒ–å½“å‰ä¼šè¯çš„è®°å¿†"""
    # 1. æå–å…³é”®å†³ç­–å’ŒçŸ¥è¯†ç‚¹
    extract_to_memory()
    
    # 2. æ›´æ–°é•¿æœŸè®°å¿†ï¼ˆå¦‚æœé‡è¦ï¼‰
    update_memories()
    
    # 3. è®°å½•åˆ°æ¯æ—¥æ—¥å¿—
    log_to_daily_notes()
    
    # 4. æ›´æ–°æ»šåŠ¨äº‹ä»¶æµ
    update_recent_events()
```

---

## æ•´åˆåˆ°OpenClaw

### WAL Protocolå¢å¼º

ç°æœ‰çš„WAL Protocolå·²ç»éƒ¨åˆ†å®ç°äº†è¿™ä¸ªæ€æƒ³ï¼š

1. **Pre-responseå†™å…¥** âœ… - å·²ç»åœ¨åš
2. **Compaction Recovery** âœ… - å·²æœ‰æœºåˆ¶
3. **Working Buffer** âš ï¸ - éœ€è¦å¢å¼º

### æ–°å¢ç»„ä»¶

```python
# memory/session-manager.py

class SessionMemoryManager:
    def __init__(self):
        self.session_start = None
        self.working_buffer = []
        self.recent_events_path = "memory/RECENT_EVENTS.md"
        
    def start_session(self):
        """å¼€å§‹æ–°ä¼šè¯"""
        self.session_start = datetime.utcnow()
        self.load_recent_context()
        
    def load_recent_context(self):
        """åŠ è½½æœ€è¿‘çš„ä¸Šä¸‹æ–‡"""
        if os.path.exists(self.recent_events_path):
            return read_file(self.recent_events_path)
        return {}
    
    def record_event(self, event_type, data):
        """è®°å½•äº‹ä»¶åˆ°æ»šåŠ¨æµ"""
        entry = {
            "timestamp": datetime.utcnow().isoformat(),
            "type": event_type,
            "data": data
        }
        self.working_buffer.append(entry)
        
    def end_session(self, summary):
        """ç»“æŸä¼šè¯ï¼Œå›ºåŒ–è®°å¿†"""
        # 1. å†™å…¥RECENT_EVENTS.md
        self.update_recent_events(summary)
        
        # 2. æå–é‡è¦å†…å®¹åˆ°MEMORY.md
        self.extract_to_long_term_memory()
        
        # 3. è®°å½•åˆ°ä»Šå¤©çš„æ—¥å¿—
        self.log_to_daily_notes()
```

---

## é¢„æœŸæ•ˆæœ

| æŒ‡æ ‡ | å½“å‰ | æ”¹è¿›å |
|------|------|--------|
| ä¸Šä¸‹æ–‡æ¢å¤ | æœ‰é™ | å®Œæ•´ |
| ç”¨æˆ·é‡å¤ä¿¡æ¯ | éœ€é‡å¤ | è‡ªåŠ¨è®°ä½ |
| ä»»åŠ¡è¿ç»­æ€§ | ä¼šè¯ä¸­æ–­ | è·¨ä¼šè¯æŒç»­ |
| å­¦ä¹ æ•ˆç‡ | å•æ¬¡ | ç´¯ç§¯ |

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… åˆ›å»ºRECENT_EVENTS.mdæ¨¡æ¿
2. ğŸ”„ å®ç°SessionMemoryManagerç±»
3. â³ é›†æˆåˆ°OpenClawä¸»å¾ªç¯
4. â³ æµ‹è¯•è·¨ä¼šè¯æ¢å¤

---

*å­¦ä¹ è‡ªEvoMapèƒ¶å›Š: sha256:def136049...*

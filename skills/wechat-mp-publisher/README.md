# å¾®ä¿¡å…¬ä¼—å·å‘å¸ƒå™¨ (wechat-mp-publisher)

å‘å¸ƒæ–‡ç« åˆ°å¾®ä¿¡å…¬ä¼—å¹³å°

## ğŸ“‹ ç›®å½•

1. [åŠŸèƒ½ä»‹ç»](#åŠŸèƒ½ä»‹ç»)
2. [é…ç½®è¦æ±‚](#é…ç½®è¦æ±‚)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## åŠŸèƒ½ä»‹ç»

- âœ… å‘å¸ƒå›¾æ–‡æ¶ˆæ¯åˆ°å…¬ä¼—å·
- âœ… ä¸Šä¼ å›¾ç‰‡ç´ æ
- âœ… è·å–è‰ç¨¿åˆ—è¡¨
- âœ… æ£€æŸ¥è´¦å·çŠ¶æ€

---

## é…ç½®è¦æ±‚

### 1. ç”³è¯·å¾®ä¿¡å…¬ä¼—å¹³å°è´¦å·

1. è®¿é—® [å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com)
2. æ³¨å†Œè´¦å·ï¼ˆè®¢é˜…å·æˆ–æœåŠ¡å·ï¼‰
3. å®Œæˆè®¤è¯

### 2. è·å– API å‡­è¯

åœ¨ã€ŒåŸºæœ¬é…ç½®ã€é¡µé¢è·å–ï¼š
- **AppID**ï¼ˆåº”ç”¨IDï¼‰
- **AppSecret**ï¼ˆåº”ç”¨å¯†é’¥ï¼‰

### 3. è®¾ç½®ç¯å¢ƒå˜é‡

```bash
export WECHAT_APPID="your_appid"
export WECHAT_APPSECRET="your_appsecret"
```

æˆ–åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„å‡­è¯
```

---

## å¿«é€Ÿå¼€å§‹

### 1. æ£€æŸ¥é…ç½®

```bash
cd /root/.openclaw/workspace/skills/wechat-mp-publisher

# æ–¹æ³•1: è®¾ç½®ç¯å¢ƒå˜é‡
export WECHAT_APPID="your_appid"
export WECHAT_APPSECRET="your_appsecret"

# æ–¹æ³•2: ä½¿ç”¨ .env æ–‡ä»¶
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# æ£€æŸ¥çŠ¶æ€
python wechat_mp_publisher.py --check
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š æ£€æŸ¥å…¬ä¼—å·é…ç½®...
âœ… è·å– access_token æˆåŠŸ
âœ… è´¦å·é…ç½®æ­£ç¡®
ğŸ“ è‰ç¨¿ç®±ä¸­æœ‰ 0 ç¯‡è‰ç¨¿
```

---

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œå‘å¸ƒ

```bash
# åŸºæœ¬å‘å¸ƒ
python wechat_mp_publisher.py \
    --title "æ–‡ç« æ ‡é¢˜" \
    --content "æ–‡ç« æ­£æ–‡å†…å®¹"

# å¸¦å°é¢å›¾
python wechat_mp_publisher.py \
    --title "æ–‡ç« æ ‡é¢˜" \
    --content "æ–‡ç« æ­£æ–‡å†…å®¹" \
    --image "cover.jpg" \
    --digest "æ–‡ç« æ‘˜è¦" \
    --author "ä½œè€…å"
```

### Python API

```python
from wechat_mp_publisher import WeChatMPPublisher

# åˆå§‹åŒ–
publisher = WeChatMPPublisher(
    appid="your_appid",
    appsecret="your_appsecret"
)

# æ£€æŸ¥çŠ¶æ€
publisher.get_access_token()

# ä¸Šä¼ å›¾æ–‡ç´ æ
media_id = publisher.upload_news(
    title="æ–‡ç« æ ‡é¢˜",
    content="æ–‡ç« æ­£æ–‡ï¼ˆæ”¯æŒHTMLï¼‰",
    thumb_path="å°é¢å›¾ç‰‡è·¯å¾„",
    digest="æ‘˜è¦",
    author="ä½œè€…"
)

# å‘å¸ƒåˆ°å…¬ä¼—å·
result = publisher.publish(media_id)
```

### å‘å¸ƒæ–‡ä»¶ä¸­çš„æ–‡ç« 

```python
# è¯»å–æ–‡ä»¶å¹¶å‘å¸ƒ
with open('article.txt', 'r', encoding='utf-8') as f:
    content = f.read()

media_id = publisher.upload_news(
    title="æˆ‘çš„å…¬ä¼—å·æ–‡ç« ",
    content=content
)
```

---

## æ³¨æ„äº‹é¡¹

### è´¦å·é™åˆ¶

| è´¦å·ç±»å‹ | æ¯å¤©å‘å¸ƒ | æ¯æœˆå‘å¸ƒ |
|---------|---------|---------|
| è®¢é˜…å· | 1æ¡ | 30æ¡ |
| æœåŠ¡å· | - | 4æ¡ |

### å†…å®¹è§„èŒƒ

- **æ ‡é¢˜**ï¼š64å­—ç¬¦ä»¥å†…
- **æ‘˜è¦**ï¼š120å­—ç¬¦ä»¥å†…
- **æ­£æ–‡**ï¼šæ”¯æŒ HTML æ ¼å¼
- **å°é¢**ï¼š900Ã—500 åƒç´ ï¼Œ5MB ä»¥å†…
- **å›¾ç‰‡**ï¼š10MB ä»¥å†…

### æ¥å£é™åˆ¶

- æ¯åˆ†é’Ÿæœ€å¤šè°ƒç”¨ 60 æ¬¡
- æ¯å¤©æœ€å¤šä¸Šä¼  10 ä¸ªå›¾ç‰‡ç´ æ
- access_token æœ‰æ•ˆæœŸ 2 å°æ—¶ï¼ˆä¼šè‡ªåŠ¨åˆ·æ–°ï¼‰

---

## å¸¸è§é—®é¢˜

### Q: æç¤º "access_token è¿‡æœŸ"

A: è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œaccess_token æœ‰æ•ˆæœŸ 2 å°æ—¶ã€‚SDK ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œå¦‚æœåˆ·æ–°å¤±è´¥è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚

### Q: å‘å¸ƒå¤±è´¥æ€ä¹ˆåŠ

A: è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤è´¦å·æƒé™ï¼ˆè®¢é˜…å·/æœåŠ¡å·ï¼‰
3. æ£€æŸ¥å†…å®¹æ˜¯å¦è¿è§„
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•å‘å¸ƒå¤šå›¾æ–‡ç« 

A: å½“å‰ç‰ˆæœ¬æ”¯æŒå•å›¾å°é¢ï¼Œå¦‚éœ€å¤šå›¾å»ºè®®ï¼š
1. å…ˆåˆ›å»ºå›¾æ–‡ç´ æ
2. åœ¨å¾®ä¿¡åå°ç¼–è¾‘æ·»åŠ å›¾ç‰‡
3. æˆ–ä½¿ç”¨å…¶ä»–å·¥å…·å¤„ç†

### Q: å¯ä»¥ç›´æ¥å‘å¸ƒåˆ°ç”¨æˆ·å—

A: å¯ä»¥ï¼Œä½¿ç”¨ `publish()` æ–¹æ³•æ—¶è®¾ç½® `publish_type` å‚æ•°ã€‚

---

## ç¤ºä¾‹

### å®Œæ•´å‘å¸ƒæµç¨‹

```bash
# 1. æ£€æŸ¥é…ç½®
python wechat_mp_publisher.py --check

# 2. å‘å¸ƒæ–‡ç« ï¼ˆä¼šåˆ›å»ºå›¾æ–‡ç´ æï¼‰
python wechat_mp_publisher.py \
    --title "æˆ‘çš„ç¬¬ä¸€ç¯‡å…¬ä¼—å·æ–‡ç« " \
    --content "<h1>Hello World</h1><p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </p>" \
    --image "cover.jpg" \
    --digest "æ–‡ç« æ‘˜è¦"

# 3. ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°
# åœ¨ã€Œç´ æç®¡ç†ã€ä¸­æ‰¾åˆ°åˆšåˆ›å»ºçš„è‰ç¨¿
# ç‚¹å‡»ã€Œç¼–è¾‘ã€å®Œå–„å†…å®¹
# ç‚¹å‡»ã€Œå‘å¸ƒã€
```

---

## ç›¸å…³èµ„æº

- [å¾®ä¿¡å…¬ä¼—å¹³å°æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Getting_Started.html)
- [API æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Interface_Instructions.html)

---

## æ›´æ–°æ—¥å¿—

**v2.0.2** (2026-02-17)
- âœ¨ åˆå§‹ç‰ˆæœ¬
- âœ… æ”¯æŒå›¾æ–‡ç´ æä¸Šä¼ 
- âœ… æ”¯æŒå›¾ç‰‡ç´ æä¸Šä¼ 
- âœ… æ”¯æŒè‰ç¨¿ç®±ç®¡ç†

